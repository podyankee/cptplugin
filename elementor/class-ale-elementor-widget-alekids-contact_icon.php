<?php
if ( ! defined( 'ABSPATH' ) ) {
	exit; // Exit if accessed directly.
}

class Ale_Elementor_Widget_Alekids_Contact_Icon extends \Elementor\Widget_Base {

	/**
	 * Widget base constructor
	 */

	public function __construct( $data = [], $args = null ) {

		add_filter( 'wpml_elementor_widgets_to_translate', [ $this, 'wpml_widgets_to_translate_filter' ] );

		parent::__construct( $data, $args );
	}

	/**
	 * WPML compatibility
	 */

	public function wpml_widgets_to_translate_filter( $widgets ) {

	  $widgets[ $this->get_name() ] = [
			'conditions' => [
				'widgetType' => $this->get_name(),
			],
			'fields' => [
			  [
					'field' => 'title',
					'type' => $this->get_title() .'<br />'. esc_html__( "Title", "alekids" ),
					'editor_type' => 'LINE'
			  ],
			],
	  ];

	  return $widgets;
	}

	/**
	 * Get widget name
	 */

	public function get_name() {
		return 'alekids_contact_icon';
	}

	/**
	 * Get widget title
	 */

	public function get_title() {
		return esc_html__( 'Contact Icon', 'alekids' );
	}

	/**
	 * Get widget icon
	 */

	public function get_icon() {
		return 'eicon-google-maps';
	}

	/**
	 * Get widget categories
	 */

	public function get_categories() {
		return [ 'ale_builder' ];
	}

	/**
	 * Register widget controls
	 */

	protected function _register_controls() {

		$this->start_controls_section(
			'content_section',
			[
				'label' => esc_html__( 'Content', 'ale' ),
			]
		);

		$this->add_control(
			'icon',
			[
				'label' => esc_html__( "Icon", "ale" ),
				'type' => \Elementor\Controls_Manager::SELECT,
				'default' => 'icon_one',
				'options' => [
					'icon_one'=> esc_html( 'Cup Icon', 'ale' ),
					'icon_two'=> esc_html( 'Map Icon', 'ale' ),
					'icon_three'=> esc_html( 'Phone Icon', 'ale' ),
					'icon_four'=> esc_html( ' Email Icon', 'ale' ),
					'custom'=> esc_html( 'Custom Image', 'ale' ),
				]
			]
        );

		$this->add_control(
			'image',
			[
				'label' => esc_html__( "Choose Icon Image", "ale" ),
				'type' => \Elementor\Controls_Manager::MEDIA,
				'conditions' => array(
					'relation' => 'or',
					'terms' => array(
						array(
						'name' => 'icon',
						'operator' => '==',
						'value' => 'custom',
					)
					)
				)
				]
        );

		$this->add_control(
			'title',
			[
				'label' => esc_html__( "Title", "ale" ),
				'type' => \Elementor\Controls_Manager::TEXT,
			]
        );
        
				

				$this->add_control(
			'color',
			[
				'label' => esc_html__( 'Text Color', 'ale' ),
				'type' => \Elementor\Controls_Manager::COLOR,
				'selectors' => [
					'{{WRAPPER}} .custom_color' => 'color: {{VALUE}}',
					'{{WRAPPER}} .bottom_line > div' => 'background-color: {{VALUE}}',
				],
			]
		);


        


		$this->end_controls_section();


	}

	/**
	 * Render widget output on the frontend
	 */

	protected function render() {

		$settings = $this->get_settings_for_display();
		$icon_color = "#333";

		if(!empty($settings['color'])) {
			$icon_color = $settings['color'];
		}

		?>

<div class="alekids_contact_icon">
	<?php if ($settings['icon'] == 'custom') {
			$image_src = $settings['image']['url'];
			if (!empty($image_src)) {
				echo '<img src="'.esc_url($image_src).'" alt="'.esc_attr($settings['title']).'" />';
			}
		} elseif($settings['icon'] == 'icon_one')  {
			echo '<svg width="90" height="90" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#a)" fill="'.esc_attr($icon_color).'"><path d="M88.617 70.311a2.204 2.204 0 0 0-.887-.19h-2.44c-.239 0-.465.05-.68.12a2.26 2.26 0 0 0-.822-.12c-5.751.257-11.504.516-17.257.755a33.561 33.561 0 0 0 5.158-3.454 19.137 19.137 0 0 0 2.99-3.067c17.45 3.3 19.203-24.592 4.038-25.908a53.153 53.153 0 0 0-1.579-6.087c-.36-1.108-1.28-1.57-2.193-1.556a2.327 2.327 0 0 0-.729-.098c-23.141.734-46.293.927-69.446.75-.754-.005-1.308.297-1.67.744-.511.359-.892.92-.957 1.697-.978 11.72-.87 24.648 8.006 33.503 1.768 1.765 3.854 3.172 6.129 4.32a467.905 467.905 0 0 1-8.167-.251c-.11-.015-.217-.034-.337-.034H2.705c-.347 0-.65.068-.914.181-1.196.215-2.187 1.215-1.633 2.67 2.344 6.162 9.11 8.632 14.992 10.221 9.806 2.65 20.346 2.995 30.441 2.922 9.523-.068 19.186-.772 28.527-2.694 6.887-1.418 14.431-4.197 15.742-11.671.072-.219.122-.448.122-.69.137-1.162-.518-1.842-1.365-2.063Zm-9.19-27.114c7.55 2.224 7.206 16.975-2.18 16.899 2.296-5.082 2.763-11.099 2.18-16.9Zm-66.094 21.02c-7.715-6.732-7.573-18.661-6.85-28.248 22.276.152 44.553-.04 66.819-.733 2.973 10.308 3.22 23.1-6.103 30.022-5.384 3.997-12.277 5.66-19.064 6.266-3.619.1-7.24.182-10.858.236-8.37-.349-17.69-2.088-23.944-7.544Zm56.135 16.826c-7.86 1.355-15.913 1.773-23.878 1.882-8.433.116-16.948-.313-25.249-1.861-3.922-.73-10.34-1.916-13.83-5.123h.51c10.236.423 20.47.47 30.703.314 1.495.057 2.957.08 4.353.082 2.197 0 4.422-.106 6.645-.325 11.691-.332 23.38-.862 35.065-1.384.265-.012.495-.072.71-.153.075.028.152.052.231.073-2.543 4.465-10.807 5.726-15.26 6.495Z"/><path d="M61.732 63.832c6.64-5.694 9.11-13.547 7.711-22.087-.47-2.86-4.81-1.643-4.344 1.197 1.146 6.992-1.205 13.12-6.553 17.705-2.21 1.894.993 5.064 3.186 3.185ZM23.156 15.816c.856 1.489 1.666 2.893 1.986 4.42.3 1.43-.455 2.858-2.31 4.365-.697.566-.957 1.464-.664 2.288a2.281 2.281 0 0 0 2.12 1.49c.507 0 .987-.172 1.387-.498 2.298-1.867 3.542-3.831 3.803-6.003.285-2.367-.561-4.454-1.427-6.18-.35-.702-.757-1.409-1.15-2.093-1.89-3.285-2.921-5.442-1.299-7.69.472-.654.543-1.459.188-2.152-.374-.73-1.159-1.2-2-1.2-.713 0-1.362.334-1.782.916-3.29 4.56-.59 9.292.86 11.834l.288.503ZM34.418 15.816c.856 1.489 1.666 2.893 1.985 4.42.3 1.43-.455 2.858-2.309 4.365-.697.566-.958 1.464-.665 2.288a2.281 2.281 0 0 0 2.121 1.49c.508 0 .987-.172 1.388-.498 2.296-1.867 3.54-3.831 3.802-6.003.285-2.367-.561-4.454-1.426-6.18-.352-.702-.759-1.409-1.151-2.093-1.89-3.285-2.922-5.442-1.299-7.69.473-.654.542-1.459.188-2.152-.373-.73-1.158-1.2-2.002-1.2-.712 0-1.36.334-1.78.916-3.29 4.56-.592 9.292.86 11.834l.288.503ZM45.679 15.815c.857 1.488 1.665 2.894 1.985 4.42.3 1.431-.455 2.859-2.309 4.366-.697.566-.958 1.464-.665 2.288a2.282 2.282 0 0 0 2.123 1.49c.507 0 .985-.172 1.387-.498 2.297-1.867 3.541-3.831 3.802-6.003.285-2.368-.56-4.453-1.426-6.18-.35-.702-.758-1.41-1.151-2.093-1.89-3.286-2.921-5.443-1.298-7.692.471-.654.54-1.458.186-2.152-.373-.729-1.158-1.2-2-1.2-.712 0-1.362.335-1.782.917-3.29 4.56-.59 9.292.86 11.834l.288.503Z"/></g><defs><clipPath id="a"><path fill="'.esc_attr($icon_color).'" d="M0 0h90v90H0z"/></clipPath></defs></svg>';
		}elseif($settings['icon'] == 'icon_two') {
			echo '<svg width="90" height="90" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M45.55 0c-1.292 0-2.64.043-3.942.125h-1.59c-.43 0-.853.092-1.258.277-9.962.199-18.48 5.635-22.264 14.228-3.712 8.428-1.931 18.003-.269 24.471 3.82 14.872 12.511 30.85 24.088 44.49l-4.463-.118c-2.44-.065-4.878-.13-7.319-.187h-.113c-2.189 0-3.353 1.5-3.37 2.981-.018 1.536 1.156 3.118 3.435 3.17 2.437.057 4.873.123 7.31.188 6.959.184 14.153.375 21.24.375 2.036 0 4.072-.014 6.11-.05 2.278-.04 3.456-1.614 3.441-3.146-.013-1.494-1.181-3.006-3.475-3.006h-.002c-2.025.036-4.051.05-6.076.05-1.643 0-3.292-.012-4.944-.03C64.447 70.657 73.275 51.75 75.383 33.617c.79-6.784.446-16.519-5.674-24.36C64.92 3.114 56.79 0 45.55 0Zm23.267 35.591c-2.448 16.366-11.07 33.601-22.589 45.236C37.107 70.354 29.611 57.77 24.521 44.37c-3.4-8.947-4.562-16.409-3.554-22.815 1.38-8.764 8.97-14.886 18.461-14.886.188 0 .375.002.65.009.445 0 .867-.09 1.258-.267h1.066c.202 0 .408-.023.625-.069a59.567 59.567 0 0 1 2.542-.055c9.024 0 15.42 2.373 19.553 7.258 3.942 4.657 5.186 12.074 3.695 22.045Z" fill="'.esc_attr($icon_color).'"/><path d="M45.065 9.92c-.195 0-.39.001-.517.008-9.293-.373-16.064 5.544-16.671 14.446-.696 10.192 8.51 17.752 17.545 18.418.398.03.8.044 1.201.044h.001c8.914 0 17.394-6.907 18.518-15.084.564-4.102-.547-7.887-3.215-10.947-3.646-4.183-10.265-6.886-16.862-6.886ZM58.44 27.17c-.753 5.476-7.273 8.865-12.937 8.865-6.587-.028-10.51-5.572-10.498-10.916.008-4.08 2.356-8.439 8.92-8.439a14.343 14.343 0 0 1 .497.007c.183-.005.369-.008.556-.008 3.654 0 8.92 1.144 11.732 4.37 1.474 1.69 2.054 3.75 1.73 6.122Z" fill="'.esc_attr($icon_color).'"/></svg>';
		}elseif($settings['icon'] == 'icon_three')  {
			echo '<svg width="90" height="90" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#a)" fill="'.esc_attr($icon_color).'"><path d="M11.473 32.695c4.945 6.952 11.605 12.93 18.567 18.95 7.48 6.467 14.089 10.585 20.8 12.96.411.147.822.182 1.22.105 8.215.375 15.114-1.952 20.348-6.9 2.339 1.652 4.457 4.73 4.02 6.932-.265 1.341-1.433 2.213-3.475 2.595-1.21.225-1.918 1.157-1.806 2.372.109 1.174 1.033 2.422 2.53 2.422.163 0 .33-.014.502-.047 4.797-.895 7.647-4.363 7.261-8.838-.3-3.483-2.433-6.887-5.736-9.192.271-.373.537-.757.796-1.152.596-.908.53-1.94-.163-2.722-.116-.421-.36-.797-.727-1.119-3.637-3.19-7.493-5.553-11.79-7.225-.597-.233-1.188-.228-1.702.01-3.955.635-7.924.47-11.871-.504a1.32 1.32 0 0 0-.12-.09 86.622 86.622 0 0 1-20.003-18.046 35.852 35.852 0 0 0 3.385-9.563c.118-.593.033-1.177-.22-1.625a2.49 2.49 0 0 0-.584-.894c-3.45-3.45-7.172-7.085-11.39-10.296A2.26 2.26 0 0 0 20.253.37a2.388 2.388 0 0 0-2.942.303C8.973 8.552 4.386 22.376 11.1 31.921c.075.272.2.532.373.774Zm13.896-10.957a2.393 2.393 0 0 0-.31 1.485c-.155.75.018 1.492.493 2.1 6.066 7.774 13.488 14.55 22.062 20.139.158.103.326.186.513.255.239.158.49.27.766.339 4.462 1.122 9.1 1.328 13.879.62 2.963 1.197 5.822 2.92 8.504 5.127-4.097 5.337-10.02 8.043-17.608 8.043-.56 0-1.127-.014-1.7-.041-7.565-2.736-13.959-7.738-19.741-12.74-5.6-4.84-11.433-10.06-15.853-15.971a2.49 2.49 0 0 0-.555-1.053c-5.992-6.806-2.641-17.613 3.602-24.505 3.17 2.494 6.078 5.329 9.013 8.258-.71 2.941-1.714 5.543-3.065 7.944Z"/><path d="M79.675 70.462c-.442 0-1.084.15-1.648.871-2.224 2.843-4.368 3.261-7.074 1.415-.418-.285-.855-.429-1.301-.429-.973 0-1.88.739-2.206 1.796-.34 1.104.034 2.189.977 2.833 1.778 1.213 3.641 1.827 5.538 1.829 2.859 0 5.562-1.443 7.61-4.06.625-.801.73-1.831.278-2.757-.437-.895-1.31-1.498-2.174-1.498ZM70.626 85.058c1.058 0 2.134-.154 3.197-.454 1.386-.393 1.86-1.62 1.716-2.662-.15-1.079-.993-2.17-2.314-2.17a2.68 2.68 0 0 0-.713.103c-2.339.665-4.412.148-6.062-1.522-.471-.478-1.045-.732-1.658-.732-.977 0-1.94.669-2.34 1.628-.375.894-.178 1.853.525 2.567 2.096 2.121 4.74 3.242 7.649 3.242ZM59.102 83.56c-2.579-.743-5.013-1.447-7.498-1.447-2.894 0-5.347.957-7.72 3.01-.745.645-.997 1.548-.675 2.417.372.998 1.412 1.722 2.472 1.722.588 0 1.149-.216 1.622-.626 1.372-1.188 3.005-1.765 4.992-1.765 2.36 0 4.945.808 7.445 1.59 2.194.687 4.463 1.396 6.54 1.534a3.1 3.1 0 0 0 .188.005c1.475 0 2.185-1.158 2.22-2.236.041-1.249-.752-2.567-2.346-2.673-2.507-.163-4.913-.858-7.24-1.53Z"/></g><defs><clipPath id="a"><path fill="'.esc_attr($icon_color).'" d="M0 0h90v90H0z"/></clipPath></defs></svg>';
		}
		elseif($settings['icon'] == 'icon_four') {
			echo '<svg width="90" height="90" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#a)"><path d="M88.352 13.584c-.054-1.543-1.068-3.012-3.062-2.946-27.703.912-55.468-2.095-82.996 2.234-2.336.368-2.731 2.562-1.887 4.234l.025.09a3.033 3.033 0 0 0-.208 1.392c1.369 19.117 3.433 38.17 5.3 57.24.02.205.065.393.115.578-.033 1.615.984 3.213 3.065 3.132 25.796-1.004 51.656-.117 77.382-2.65.22-.021.424-.069.622-.124 1.524-.083 3.02-1.096 3.087-3.056.685-19.808-.497-39.576-1.324-59.36a3.595 3.595 0 0 0-.119-.764Zm-4.837 37.938C79.21 45.327 74.34 39.55 69.228 33.966c4.614-3.12 9.062-6.484 13.298-10.15.41 9.236.809 18.47.99 27.707ZM80.487 17.1c-10.08 9.145-21.414 16.418-33.61 22.448-12.27-6.11-23.398-14.072-34.827-21.573 22.702-2.427 45.628-.49 68.436-.875ZM6.87 22.173c6.11 3.963 12.11 8.1 18.216 12.054-5.11 8.47-10.695 16.678-14.792 25.623-1.248-12.55-2.47-25.1-3.424-37.677Zm76.634 48.57c-23.788 2.14-47.685 1.547-71.535 2.336.256-.316.463-.703.598-1.175C16.115 59.3 23.75 48.692 30.462 37.627c4.546 2.806 9.182 5.464 14.003 7.823.056.026.111.038.167.062.91.78 2.21 1.124 3.573.469a170.452 170.452 0 0 0 15.604-8.521c7.338 7.942 14.175 16.219 19.53 25.663.081.145.176.258.269.38a371.848 371.848 0 0 1-.104 7.24Z" fill="'.esc_attr($icon_color).'"/></g><defs><clipPath id="a"><path fill="'.esc_attr($icon_color).'" d="M0 0h90v90H0z"/></clipPath></defs></svg>';
		}
		 ?>
	<?php if($settings['title']){ ?><h4 class="contact_title custom_color"><?php echo esc_attr($settings['title']); ?></h4><?php } ?>


	<div class="bottom_line">
		<div></div>
		<div></div>
		<div></div>
		<div></div>
	</div>
</div>



<?php

	}

}